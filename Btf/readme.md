# Итоговая структура BTF файла

## Общая структура файла BTF
### Заголовок (Header):

Первые 12 байтов содержат три значения:
- Количество записей в файле (4 байта)
- Размер файла в байтах (4 байта)
- Количество символов в секции строк (4 байта)

### Секция индексов строк (String Index Section):
Эта секция содержит записи, каждая из которых указывает на строку в текстовой секции.
Каждая запись состоит из 10 байтов:
- Индекс строки (4 байта) — указывает на уникальный идентификатор строки.
- Адрес начала строки (4 байта) — указывает, где начинается строка в текстовой секции, выраженный в количестве символов от начала текстовой секции.
- Длина строки (2 байта) — указывает на количество символов в строке.

### Текстовая секция (String Section):
Эта секция содержит строки в формате UTF-16 Big Endian.
Каждая строка заканчивается нулевым символом (\0).

## Подробности
### Формат строк
Строки в текстовой секции закодированы в формате UTF-16 Big Endian, что означает, что каждый символ представлен двумя байтами (или четырьмя, если символы находятся за пределами базовой плоскости Unicode).

### Адреса строк
Адреса в секции индексов указывают не на байты, а на символы. Это означает, что для определения реального байтового адреса нужно учитывать, что каждый символ занимает 2 байта.

### Длина строки
Указана в символах, что также нужно учитывать при манипуляциях с текстовой секцией.
Пример записи в секции индексов строк
Предположим, что у нас есть строка с индексом 6151 (пример из переписки):

Индекс строки: 00 00 18 07 (в шестнадцатеричном формате это 6151)
Адрес начала строки: 00 02 AC 9F (в шестнадцатеричном формате это 175263 символов от начала текстовой секции)
Длина строки: 00 13 (в шестнадцатеричном формате это 19 символов)